<!DOCTYPE HTML>
<html>

<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<title>SkyvorMed Medical Device Data Capture Cloud</title>
    <link rel="stylesheet" href="style.css">
    <script src="scripts.js"></script>
    <!-- HH scripts -->
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <script type="text/javascript" src="date-de-CH.js"></script>
    <!-- <script type="text/javascript" src="parse.js"></script> -->
    <!-- end of HH scripts -->
</head>

<body>
    <div class="cover_screen_dropdown" id="cover_screen_dropdown" onclick="toggle_dropdown();"></div>
	<header>
		<nav class="top_nav">
            <div class="nav_left">
                <span class="nav_left_span">
                    <div class="nav-select">
                        <div class="nav_symbol"><img src="icons_white/book_white.png" style="width:16px;margin-top:4px"></div>
                        <select name="study">
                            <option value="STD00001">STD00001</option>
                            <option value="STD00001">STD00002</option>
                            <option value="STD00001">STD00003</option>
                            <option value="STD00001">STD00004</option>
                        </select>
                    </div>
                    <div class="nav-select">
                        <div class="nav_symbol"><img src="icons_white/hospital_white.png" style="width:16px;margin-top:4px"></div>
                        <select name="site">
                            <option value="STD00001">All sites</option>
                            <option value="STD00001">SITE00001</option>
                            <option value="STD00001">SITE00002</option>
                            <option value="STD00001">SITE00003</option>
                            <option value="STD00001">SITE00004</option>
                            <option value="STD00001">SITE00005</option>
                            <option value="STD00001">SITE00006</option>
                        </select>
                    </div>
                    <div class="nav-select">
                        <div class="nav_symbol"><img src="icons_white/patient_file_white.png" style="width:16px;margin-top:4px"></div>
                        <select name="subject">
                            <option>0000001</option>
                            <option>0000002</option>
                            <option>0000003</option>
                            <option>0000004</option>
                            <option>0000005</option>
                        </select>
                    </div>
                </span>
            </div>
            <div class="nav_right">
                <span class="nav_right_span"><div class="nav_name" onclick="toggle_dropdown();">John Doe <font style="font-style:italic; font-weight: normal;">(Study manager)</font></div></span>
            </div>
		</nav>
        <nav class="nav2">
            <div class="nav2_left">
                <a href="overview.html" class="home_link">
                    <font style="font-size:24pt; font-weight:bold; color:white;">SKYVOR</font><font style="font-size:24pt; font-weight:bold; color:#A6D4FF;">MEDICAL</font><br>
                    <font style="font-size:10pt; color:#DEDEDE;">Medical Device Data Capture Cloud</font>
                </a>
            </div>
            <div class="nav2_right">
                <span class="nav2_links"><a href="virtual_call.html">VIRTUAL CALL</a></span><span class="nav2_links_selected"><a href="overview.html">SUBJECTS</a></span><span class="nav2_links">REPORTS</span><span class="nav2_links">DOCUMENTS</span>
            </div>
        </nav>
        <div class="nav_dropdown" id="nav_dropdown" style="display:none;">
        <span class="nav_dropdown_span_inactive">No pending notifications</span>
        <div style="width:250px; height:1px; position:relative; display:block; background-color:white;"></div>
        <!--
        <span class="nav_dropdown_span">Settings</span>
        <span class="nav_dropdown_span">Help</span>
        -->
        <span class="nav_dropdown_span"><a href="login.html">Logout</a></span>
        </div>
	</header>
	<main>
        <div class="main_div2">
            <div class="main_div_cell_padding_left">
            </div>
            <div class="main_div_cell_left" id="main_div_cell_left">
                    <span class="left_header"><font style="font-weight:bold;">Subject: </font>0000001<br>
                        <span class="left_header_sub" onclick="expandAll()" style="cursor:pointer;"><div class="menu_expand_empty" style="cursor:pointer;">+</div>Expand all</span><br>
                        <span class="left_header_sub" onclick="collapseAll()" style="cursor:pointer;"><div class="menu_expand_empty" style="cursor:pointer;">-</div>Collapse all</span>
                    </span>
                    <div style="width:100%; height:1px; position:relative; display:block; background-color:#CACACA; margin-bottom:12px;"></div>
                    <span class="left_nav">
                        <div class="straight_line"></div>
                        <!-- HH -->
                        <span class="left_nav_elem">
                            <div class="horizontal_line"></div>
                            <div class="menu_expand_empty" id="expand_2"></div>
                        <a>Device monitoring</a>
                        </span>
                        <!-- HH end -->
                        <span class="left_nav_elem"><div class="horizontal_line"></div><div class="menu_expand" id="expand_1" onclick="expand_collapse_item('sub_1','expand_1');" style="cursor:pointer;">+</div>Screening</span>
                        <span class="left_nav_sub" style="display:none;" id="sub_1">
                            <div class="straight_line_sub"></div>
                            <span class="left_nav_elem_sub"><div class="horizontal_line_sub"></div><div class="menu_expand_empty"></div>Date of Inform Consent</span>
                            <span class="left_nav_elem_sub"><div class="horizontal_line_sub"></div><div class="menu_expand_empty"></div>Demographics</span>
                            <span class="left_nav_elem_sub"><div class="horizontal_line_sub"></div><div class="menu_expand_empty"></div>Medical history</span>
                        </span>
                        <span class="left_nav_elem"><div class="horizontal_line"></div><div class="menu_expand" id="expand_3" onclick="expand_collapse_item('sub_3','expand_3');" style="cursor:pointer;">+</div>Day 1</span>
                        <span class="left_nav_sub" style="display:none;" id="sub_3">
                            <div class="straight_line_sub"></div>
                            <span class="left_nav_elem_sub"><div class="horizontal_line_sub"></div><div class="menu_expand_empty"></div>Date of Enrollment</span>
                            <span class="left_nav_elem_sub"><div class="horizontal_line_sub"></div><div class="menu_expand_empty"></div>Vital signs</span>
                            <span class="left_nav_elem_sub"><div class="horizontal_line_sub"></div><div class="menu_expand" id="expand_3_3" onclick="expand_collapse_item('sub_3_3','expand_3_3');" style="cursor:pointer;">+</div>Laboratory Tests</span>
                            <span class="left_nav_sub" style="display:none;" id="sub_3_3">
                                <div class="straight_line_sub"></div>
                                <span class="left_nav_elem_sub"><div class="horizontal_line_sub"></div><div class="menu_expand_empty"></div>Serum Pregnancy Test</span>
                                <span class="left_nav_elem_sub"><div class="horizontal_line_sub"></div><div class="menu_expand_empty"></div>Pharmacogenomics Blood Sampling</span>
                            </span>
                            <span class="left_nav_elem_sub"><div class="horizontal_line_sub"></div><div class="menu_expand_empty"></div>Study Treatment / IP Dispensation</span>
                            <span class="left_nav_elem_sub"><div class="horizontal_line_sub"></div><div class="menu_expand_empty"></div>Adverse Events</span>
                            <span class="left_nav_elem_sub"><div class="horizontal_line_sub"></div><div class="menu_expand_empty"></div>Concomitant Medication</span>
                        </span>
                        <span class="left_nav_elem"><div class="horizontal_line"></div><div class="menu_expand" id="expand_4" onclick="expand_collapse_item('sub_4','expand_4');" style="cursor:pointer;">+</div>Visit 1</span>
                        <span class="left_nav_sub" style="display:none;" id="sub_4">
                            <div class="straight_line_sub"></div>
                            <span class="left_nav_elem_sub"><div class="horizontal_line_sub"></div><div class="menu_expand_empty"></div>Date of Visit</span>
                            <span class="left_nav_elem_sub"><div class="horizontal_line_sub"></div><div class="menu_expand" id="expand_4_3" onclick="expand_collapse_item('sub_4_3','expand_4_3');" style="cursor:pointer;">+</div>Laboratory Tests</span>
                            <span class="left_nav_sub" style="display:none;" id="sub_4_3">
                                <div class="straight_line_sub"></div>
                                <span class="left_nav_elem_sub"><div class="horizontal_line_sub"></div><div class="menu_expand_empty"></div>Hematology and Chemistry</span>
                            </span>
                            <span class="left_nav_elem_sub"><div class="horizontal_line_sub"></div><div class="menu_expand_empty"></div>Study Treatment / IP Dispensation</span>
                            <span class="left_nav_elem_sub"><div class="horizontal_line_sub"></div><div class="menu_expand_empty"></div>Adverse Events</span>
                            <span class="left_nav_elem_sub"><div class="horizontal_line_sub"></div><div class="menu_expand_empty"></div>Concomitant Medication</span>
                        </span>
                        <span class="left_nav_elem"><div class="horizontal_line"></div><div class="menu_expand_empty" id="expand_5" onclick="expand_collapse_item('sub_5','expand_5');" style="cursor:pointer;"></div>End of treatment</span>
                        <span class="left_nav_elem"><div class="horizontal_line"></div><div class="menu_expand_empty" id="expand_6" onclick="expand_collapse_item('sub_6','expand_6');" style="cursor:pointer;"></div>Follow-up Visits</span>
                        <span class="left_nav_elem"><div class="horizontal_line"></div><div class="menu_expand_empty" id="expand_7" onclick="expand_collapse_item('sub_7','expand_7');" style="cursor:pointer;"></div>End of Study</span>
                    </span>
                <div class="minimizer" onclick="toggle_minimizer();">
                &#9664;
                </div>
            </div>
            <div class="main_div_cell_right" id="main_div_cell_right">
                <header class="main_header">
                 
                <!-- start HH checkbox -->
                <table style="width:800px;">
                    <tr>
                        <th style="border-width: 0px; text-align: left;">Plots</th>
                        <th style="border-width: 0px; text-align: left;">
                            <table>
                                <tr>
                                    <td> <input type="checkbox" 
                                               id="check_filter" 
                                               onclick="plotAll()"
                                               style="height: 18px;"> 
                                    </td>
                                    <td>Filter Date</td>
                                </tr>
                            </table>
                        </th>
                    </tr>
                    <tr>
                        <!-- plot checkbox -->
                        <td style="width: 50%">
                            <table>
                                <tr >
                                    <td >
                                        <input type="checkbox" 
                                               id="hr" 
                                               name="plot1" 
                                               value="hr" 
                                               onclick="plotAll()"
                                               style="height: 16px;"> 
                                    </td>
                                    <td>
                                        <label for="plot1"> Heart Rate</label>
                                    </td>
                                </tr>
                                <tr style="height: 18px;">
                                    <td>
                                        <input type="checkbox" id="steps" name="plot2" value="steps" onclick="plotAll()" style="height: 16px;">
                                    </td>
                                    <td>
                                        <label for="plot2"> Activity</label>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                       <input type="checkbox" id="spo2" name="plot3" value="spo2" onclick="plotAll()" style="height: 16px;"> 
                                    </td>
                                    <td>
                                        <label for="plot3"> Blood O2 amount</label>
                                    </td>
                                </tr>
                            </table>
                        </td>
                        <!-- calendar -->
                        <td>
                            <table>
                                <tr>
                                    <td>starting date</td>
                                    <td>
                                        <input type="date" id="filter-start" name="filter-start" max="2021-05-18" onchange="plotAll()">
                                    </td>
                                </tr>
                                
                                <tr>
                                    <td>ending date</td>
                                    <td>
                                        <input type="date" id="filter-end" name="filter-end" onchange="plotAll()">
                                    </td>
                                </tr>     
                            </table>
                        </td>
                    </tr>
                </table>
                <!-- HH end of div -->


            <div style="width:100%; height:1px; position:relative; display:block; background-color:black; margin-bottom:0px;"></div>
                </header>
                <!-- HH add plots -->
                <div id="div_plot"></div>
                <script type="text/javascript" src="plotH.js"></script>
                <script type="text/javascript" src="fakeData.js"></script>
                <script type="text/javascript"> 

                // all traces
                const numPoints = 200;
                const interval = 15; // min
                var allTraces = [];
                allTraces['Heart Rate'] = getTimeTrace(numPoints, interval, 70, 100, 1,'Heart Rate');
                allTraces['Oxygen'] = getTimeTrace(numPoints, interval, 80, 90, 2, 'Blood O2');
                allTraces['Activity'] = getBarplot(numPoints, interval, 60, 95, 10,'Steps');
                
                setCalendar();       

                function plotAll(){
                    var tracesToPlot = [];
                    // first decide what traces to plot
                    tracesToPlot = runFilter();
                    // debugger;

                    // get all traces
                    var output = getAll(tracesToPlot);
                    var allPlots = output['allPlots'];
                    var layout = output['layout'];
                    
                    // plot
                    if(allChecked()['num']>0){
                        Plotly.newPlot('div_plot', allPlots, layout);
                    } else {  // if no plot selected
                        document.getElementById("div_plot").innerHTML="";
                    }
                    
                }

                function runFilter(){
                    var traces = [];
                    if(document.getElementById("check_filter").checked){
                        // use filtered traces
                        traces = filterDate(allTraces);
                    } else {
                        // use whole traces
                        Object.assign(traces, allTraces);
                    }
                    return traces;
                }
                </script>

                <!-- end of HH plots -->

                <div class="maximizer" id="maximizer" onclick="toggle_maximizer();">
                &#9654;
                </div>
            </div>
            <div class="main_div_cell_right_margin"></div>
        </div>
    </main>

	<footer>
		<p>Copyright 2021 KaivorMed</p>
	</footer>

</body>

</html>

